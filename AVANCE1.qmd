---
title: "PRIMERA_ENTREGA"
format: html
editor: visual
---

# GRUPO 3:

### Integrantes :

-   Alania Huillca Miguel Edison

-   Tassara Acosta Rodrigo Andrés

-   Olagibel Romero Fabricio Alberto

-   Trinidad Leiva Isaac Eduardo

-   Huaman Puiquin Hector Emilio

## Objetivo General:

**Determinar si en su mayoría los alumnos de pregrado de la Universidad de Ingeniería y Tecnología consumen café.**

## Objetivos Específicos:

1.  **COMPARAR** el rendimiento académico entre los estudiantes de pregrado de la Universidad de -Tecnología e Ingeniería que consumen café y los que no consumen café.

2.  EXPLORAR la relación económica de los estudiantes de pregrado de la Universidad de Tecnología e Ingeniería con su comportamiento de consumo de café.

## Variables y sus tipos:

## Primer objetivo

-   Número de tazas de café que los estudiantes de UTEC consumen durante los días de exámenes.(**Cuantitativa discreta**) -\>

-   Número de horas extras que los estudiantes de UTEC dedican al estudio cuando consumen café.(**Cuantitativa continua**)

-   Impacto en el rendimiento académico de los estudiantes de UTEC al consumir café.(**Cualitativa ordinal**)

-   Café favorito de los estudiantes de UTEC en sus horas de estudio.(**Cualitativa nominal**)

## Segundo objetivo

-   Cantidad máxima de dinero que los estudiantes de UTEC pagarían por una taza de café.(**Cuantitativa continua**)

-   Gasto semanal de café de los estudiantes de UTEC .(**Cuantitativa discreta**)

-   Tipo de beca de los estudiantes de pregrado de UTEC.(**Cualitativa ordinal**)

-   Establecimiento favorito de los estudiantes de UTEC para comprar café.(**Cualitativa nominal**

# Análisis de la base de datos.

Para poder ejecutar el código y hacer el análisis de la base de datos, usaremos el lenguaje de Programación Estadístico R y ciertas librerías para facilitar el proceso.

Instalar las librerías:

```{r}
# install.packages("readr") # Para cargar el csv
# install.packages("plyr")
# install.packages("dplyr")
# install.packages("tidyr")
# install.packages("tidyverse") 
# install.packages("ggplot2") # Para imprimir los gráficos
```

Y las importamos de la siguiente manera.

```{r}
library(readr)
library(plyr)
library(dplyr)
library(tidyr)
library(tidyverse)
library(ggplot2)
```

### Miscelánea

```{r}
df <- read_csv("Café (respuestas).csv")
df_filtered <- df %>% filter(str_starts(as.character(`Alumno encuestador`), "3"))

df_filtered

print("Cantidad de encuestas por integrante: ")
custom_tags <- c("Hector", "Miguel", "Eduardo", "Rodrigo", "Fabricio")
tag_values <- table(df_filtered$`Alumno encuestador`)

for (i in seq_along(custom_tags)) {
  cat(custom_tags[i], ":", tag_values[i], "\n")
}
total_value <- sum(tag_values)
cat("Cantidad total de muestras :", total_value, "\n")
cantidad_muestras_sin_na <- nrow(df_no_na)

df_no_na <- na.omit(df_filtered)
cat("Cantidad de muestras sin NAs :", cantidad_muestras_sin_na, "\n")

print(df_no_na)
```

# Avance 2

En primer lugar, definimos las variables relevantes para nuestro caso\

### Variables Generales:

1.  **Sexo** (Sexo)

2.  **Edad** (Edad)

3.  **Ciclo** (Ciclo académico)

### Objetivo 1: Comparar el rendimiento académico entre quienes consumen café y quienes no

1.  **¿Consume café?**

2.  **¿Cuántas tazas de café consumes en un día?**

3.  **¿Cuántas tazas de café consumías antes de ser alumno de UTEC?**

4.  **Durante un día de exámenes, ¿Cuántas tazas de café consumes?**

5.  **¿Dedicas tiempo extra al estudio cuando consumes café? ¿Cuánto?**

6.  **Si tuvieras que describir tu rendimiento académico cuando consumes café ¿Cómo sería?**

7.  **¿Cuál fue tu promedio ponderado en el ciclo 2024-1?**

### Objetivo 2: Explorar la relación económica del consumo de café

1.  **¿Recibes algún apoyo económico para estudiar UTEC?**

2.  **¿Cuál es el monto máximo que estás dispuesto a gastar en una buena taza de café?**

3.  **¿Cuánto gastas en café a la semana?**

4.  **¿En qué tipo de establecimiento compras café con mayor frecuencia?**

5.  **¿Tu consumo de café cambió al ingresar a la universidad?**

ahora que ya hemos definido las variables relevantes, creamos un dataset de solo estas

```{r}
crear_DF2 <- function(df_filtered) {
  # Seleccionar las variables de interés
  DF2 <- df_filtered[, c("Sexo",
                         "Edad",
                         "Ciclo:",
                         "¿Consume café?",
                         "En promedio ¿Cuántas tazas de café consumes en un día?",
                         "Antes de ser alumno de UTEC, ¿cuántas tazas de café consumías al día aproximadamente?",
                         "Durante un día de exámenes, ¿Cuántas tazas de café consumes?",
                         "¿Dedicas tiempo extra al estudio cuando consumes café? ¿Cuánto?",
                         "Si tuvieras que describir tu rendimiento académico cuando consumes café ¿Cómo sería?",
                         "¿Cuál fue tu promedio ponderado en el ciclo 2024-1? (Tal cual aparece en tu intranet de estudiante).",
                         "¿Recibes algún apoyo económico para estudiar UTEC?",
                         "¿Cuál es el monto máximo que estás dispuesto a gastar en una buena taza de café? (en soles)",
                         "¿Cuánto gastas en café a la semana?",
                         "¿En qué tipo de establecimiento compras café con mayor frecuencia?",
                         "¿Tu consumo de café cambió al ingresar a la universidad?")]
  
  return(DF2)
}

# Uso de la función para crear el nuevo dataset DF2
DF2
```

ahora lo que haremos sera cambiarle el nombre a las variables para que el dataset sea mas fácil de entender

### Variables Generales:

1.  **Sexo** (Sexo)

2.  **Edad** (Edad)

3.  **Ciclo** (Ciclo académico)

### Objetivo 1: Comparar el rendimiento académico

1.  **Consumo_cafe** (¿Consume café?)

2.  **Tazas_por_dia** (En promedio, ¿Cuántas tazas de café consumes en un día?)

3.  **Tazas_antes_UTEC** (¿Cuántas tazas de café consumías antes de ser alumno de UTEC?)

4.  **Tazas_examenes** (Durante un día de exámenes, ¿Cuántas tazas de café consumes?)

5.  **Tiempo_extra_estudio** (¿Dedicas tiempo extra al estudio cuando consumes café?)

6.  **Rendimiento_con_cafe** (¿Cómo describirías tu rendimiento académico cuando consumes café?)

7.  **Promedio_ponderado_2024_1** (Promedio ponderado en el ciclo 2024-1)

### Objetivo 2: Relación económica del consumo de café

1.  **Apoyo_economico** (¿Recibes algún apoyo económico para estudiar en UTEC?)

2.  **Monto_maximo_cafe** (Monto máximo dispuesto a gastar en una buena taza de café)

3.  **Gasto_semanal_cafe** (Gasto en café a la semana)

4.  **Lugar_compra_cafe** (Tipo de establecimiento donde compras café con mayor frecuencia)

5.  **Cambio_consumo_UTEC** (¿Tu consumo de café cambió al ingresar a la universidad?)

creamos otra función para ejecutar estos cambios:

```{r}
cambiar_nombres_DF2 <- function(DF2) {
  # Cambiar los nombres de las columnas
  colnames(DF2) <- c("Sexo", 
                     "Edad", 
                     "Ciclo", 
                     "Consumo_cafe", 
                     "Tazas_por_dia", 
                     "Tazas_antes_UTEC", 
                     "Tazas_examenes", 
                     "Tiempo_extra_estudio", 
                     "Rendimiento_con_cafe", 
                     "Promedio_ponderado_2024_1", 
                     "Apoyo_economico", 
                     "Monto_maximo_cafe", 
                     "Gasto_semanal_cafe", 
                     "Lugar_compra_cafe", 
                     "Cambio_consumo_UTEC")
  
  return(DF2)
}

DF2
```

ahora vamos a ver si necesitamos limpiar alguna variable\
como vemos todas o han sido categórica ordinal o categórica nominal o numérica continua y de marcar\
sin embargo podemos ver que hay variables como promedio donde hay datos raros como un promedio 84 por ejemplo\
vamos a limpiar estos datos estableciendo que promedio no puede subir de 20 remplazándolos con NAs

```{r}
DF2$Promedio_ponderado_2024_1 <- ifelse(DF2$Promedio_ponderado_2024_1 > 20, NA, DF2$Promedio_ponderado_2024_1)


DF2
```

Como vemos la variable ahora esta limpia\
Ahora vamos a limpiar la variable ciclo, para asegurarnos que solo este en el rango normal que debería tener de 1 a 10

```{r}
reemplazar_ciclo_na <- function(DF2) {
  DF2$Ciclo <- ifelse(DF2$Ciclo < 1 | DF2$Ciclo > 10, NA, DF2$Ciclo)
  return(DF2)
}

DF2
```

Ahora trataremos de limpiar a la variable edad\
primero la analizaremos mediante quantile

```{r}
quantile(DF2$Edad,na.rm = TRUE)
max(DF2$Edad)
```

como vemos si presenta valores atípicos\
para esto limitamos el rango de edades a menos de 199 para ver si ese era el único valor raro, usando como criterio máximo 50

```{r}
DF2$Edad <- ifelse(DF2$Edad > 50, NA, DF2$Edad)

quantile(DF2$Edad, na.rm = TRUE)
```

Como vemos nos bota 39 que si tiene algo de sentido como edad máxima

seguimos con la variable tazas por día y usamos quantile para ver si hay datos anormales\
primero convertimos la variable a numérica y luego usamos quantile.

```{r}
DF2$Tazas_por_dia <- as.numeric(DF2$Tazas_por_dia)
quantile(DF2$Tazas_por_dia, na.rm = TRUE)
```

como vemos si hay un valor anormal el cual es el 80\
filtramos con el criterio que nos dijo el profesor el cual era de 10 tazas y comprobamos

```{r}
  
DF2$Tazas_por_dia <- ifelse(DF2$Tazas_por_dia > 10, NA, DF2$Tazas_por_dia)

quantile(DF2$Tazas_por_dia, na.rm = TRUE)
```

Nos quedamos con 10 tazas que si bien es algo extremo es mas creíble pues fue lo que nos dijo el profesor que se tomaba al día

ahora trataremos de limpiar la variable Tazas_antes_UTEC de la misma manera, primero la convertimos a numerica y como ya tenemos el criterio de las 10 tazas lo aplicamos directamente

```{r}
DF2$Tazas_antes_UTEC <- as.numeric(DF2$Tazas_antes_UTEC)
DF2$Tazas_antes_UTEC <- ifelse(DF2$Tazas_antes_UTEC > 10, NA, DF2$Tazas_antes_UTEC)

quantile(DF2$Tazas_antes_UTEC, na.rm = TRUE)
```

Nos queda con 6 tazas al día como máximo lo cual es creíble

ahora trataremos de limpiar la variable Tazas_exámenes, como ya tenemos criterio ponemos de frente el máximo 10 tazas

```{r}
DF2$Tazas_examenes <- ifelse(DF2$Tazas_examenes > 10, NA, DF2$Tazas_examenes)
quantile(DF2$Tazas_examenes, na.rm = TRUE)
```

nos queda como máximo el diez que como dijimos anteriormente si bien es extremo es creíble

ahora es el turno de la variable monto_máximo_café\
aplicamos criterio y usamos como filtro 50 soles máximo

```{r}
DF2$Monto_maximo_cafe <- ifelse(DF2$Monto_maximo_cafe > 50, NA, DF2$Monto_maximo_cafe)
quantile(DF2$Monto_maximo_cafe, na.rm = TRUE)
```

nos da 40 que si bien es extremo es creíble

ahora es el turno de la variable Gasto_semanal_cafe\
aplicamos criterio y usamos como filtro 100 soles máximo

```{r}
DF2$Gasto_semanal_cafe <- ifelse(DF2$Gasto_semanal_cafe > 100, NA, DF2$Gasto_semanal_cafe)
quantile(DF2$Gasto_semanal_cafe, na.rm = TRUE)
```

Nos da 100 soles que si bien es bastante es creíble

por ultimo vemos el dataframe ya limpio y prolijo

```{r}
DF2
```

calculamos el tamaño efectivo de cada variable y su cantidad de NAs y su porcentaje de NAs

```{r}

data.frame(
Tamaño_efectivo = sapply(DF2, function(columna) sum(!is.na(columna))),
NAs_totales = sapply(DF2, function(columna) sum(is.na(columna))),
Porcentaje_NA = round(sapply(DF2, function(columna) sum(is.na(columna)))
/270*100, 2))
```

# Avance 3

1.  Este avance parte la base de datos limpia. Es decir, la muestra efectiva.
2.  Partimos en dos bloques de análisis:\
    1.  Análisis univariado\
    2.  Análisis bivariado
3.  También puede estructurarse el informe en función de los objetivos\
    1.  Objetivo 1\
    2.  Objetivo 2\
    3.  Etc
4.  Identificar las variables más relevantes del estudio.
5.  El análisis coherente se refiere a que las conclusiones a partir de los gráficos y descriptores numéricos estén en el contexto del estudio.\
    -   ERROR: La mediana de los ingresos es 1500, la media/promedio de los ingresos es 1200, la desviación estándar es 200, etc\
    -   CORRECTO: Se observa en el gráfico 1 que la distribución de ingresos es asimétrica con la cola a la derecha, es decir, el 50% de los limeños tienen ingreso menor a 1500, etc, etc
6.  Si un objetivo es: ESTUDIAR la relación entre los ingresos mensuales y el nivel educativo de Lima Provinvia en el 2020.\
    -   Generar los descriptores apropiados Boxplot indexado y proporción por nivel Educativo: etc, etc
